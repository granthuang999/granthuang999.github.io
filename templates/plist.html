{% extends 'base.html' %}
{% block head %}
<meta name="description" content="{{ blogBase['subTitle'] }}">
<meta property="og:title" content="{{ blogBase['title'] }}">
<meta property="og:description" content="{{ blogBase['subTitle'] }}">
<meta property="og:type" content="blog">
<meta property="og:url" content="{{ blogBase['homeUrl'] }}">
<meta property="og:image" content="{{ blogBase['ogImage'] }}">
<title>{{ blogBase['title'] }}</title>
{% endblock %}

{% block style %}
<style>
.avatar {transition: 0.8s;width:64px;height:64px;object-fit: cover;}
.avatar:hover{transform: scale(1.15) rotate(360deg);}
/* [样式已清理] 从 .title-left a 中删除了 font-size:40px; */
.title-left a{color:inherit;text-decoration:none;vertical-align: bottom;font-weight: bold;font-family:Monaco;margin-left:8px;}
.title-right{display:flex; margin-left:auto; align-items:center;}
.title-right button{margin-right:8px;padding:16px;}
.title-right .circle{padding: 14px 8px;}

.SideNav{min-width: 360px;}
.SideNav-icon{margin-right: 16px}
.SideNav-item .Label{color: #fff;margin-left:4px;}
.d-flex{min-width:0;}
.listTitle{overflow:hidden;white-space:nowrap;text-overflow: ellipsis;max-width: 100%;}
.listLabels{white-space:nowrap;display:flex;}
.listLabels object{max-height:16px;max-width:24px;}

#animated-subtitle {
    min-height: 24px;
}

@media (max-width: 600px) {
    body {padding: 8px;}
    .avatar {width:40px;height:40px;}
    .blogTitle{display:none;}
    #buttonRSS{display:none;}
    .LabelTime{display:none;}
}
</style>
{{ blogBase['indexStyle'] }}
{% endblock %}

{% block header %}
<div class="title-left">
    <img src="{{ blogBase['avatarUrl'] }}" class="avatar circle" id="avatarImg" alt="avatar">
    {%- if blogBase['displayTitle']=='Meekdai' -%}
    <h1 class="blogTitle" style="font-size: inherit; font-weight: bold; margin: 0; display: inline;"><a href="https://meekdai.com" style="color: inherit; text-decoration: none;"><span style="font-size:0;">M</span>eekdai</a></h1>
    {% else -%}
    <h1 class="blogTitle" style="font-size: inherit; font-weight: bold; margin: 0; display: inline;"><a href="{{ blogBase['homeUrl'] }}" style="color: inherit; text-decoration: none;">{{ blogBase['displayTitle'] }}</a></h1>
    {%- endif -%}
</div>
<div class="title-right">
    <a href="{{ blogBase['homeUrl'] }}/tag.html" id="buttonSearch" class="btn btn-invisible circle" title="{{ i18n['Search'] }}">
        <svg class="octicon" width="16" height="16" >
            <path id="pathSearch" fill-rule="evenodd"></path>
        </svg>
    </a>
    {% for key, value in blogBase['exlink'].items() -%}
    <a href="{{ value }}" class="btn btn-invisible circle" title="{{ key }}" target="_blank">
        <svg class="octicon" width="16" height="16" >
            <path id="{{ key }}" fill-rule="evenodd"></path>
        </svg>
    </a>
    {%- endfor %}
    {%- for num in blogBase['singeListJson'] %}
    {%- if blogBase['singeListJson'][num]['labels'][0] in blogBase['singlePage'] %}
    <a href="{{ blogBase['homeUrl'] }}/{{ blogBase['singeListJson'][num]['labels'][0] }}.html" class="btn btn-invisible circle" title="{{ blogBase['singeListJson'][num]['postTitle'] }}">
        <svg class="octicon" width="16" height="16" >
            <path id="{{ blogBase['singeListJson'][num]['postTitle'] }}" fill-rule="evenodd"></path>
        </svg>
    </a>
    {%- endif %}
    {%- endfor %}
    <a href="{{ blogBase['homeUrl'] }}/rss.xml" target="_blank" id="buttonRSS" class="btn btn-invisible circle" title="RSS">
        <svg class="octicon" width="16" height="16" >
            <path id="pathRSS" fill-rule="evenodd"></path>
        </svg>
    </a>
    <a class="btn btn-invisible circle" onclick="modeSwitch()" title="{{ i18n['switchTheme'] }}" {%- if blogBase['themeMode']=='fix' -%}style="display:none;"{%- endif -%}>
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>
</div>
{% endblock %}

{% block content %}

<div id="animated-subtitle" style="margin-bottom: 16px; text-align: center; font-style: italic;"></div>

<nav class="SideNav border">
{# [关键修复] 修正了遍历文章列表的循环方式 #}
{% for post in postListJson -%}
<a class="SideNav-item d-flex flex-items-center flex-justify-between" href="{{ post['postUrl']|e }}">
    <div class="d-flex flex-items-center">
        <svg class="SideNav-icon octicon" style="width:16px;height:16px"><path class="svgTop{{ post['top'] }}" d=""></path>
        </svg>
        <span class="listTitle">{{ post['postTitle']|e }}</span>
    </div>
    <div class="listLabels">
        {% if post['commentNum']>0 %}<span class="Label" style="background-color:{{ blogBase['commentLabelColor'] }}">{{ post['commentNum'] }}</span>{% endif %}
        {% for label in post['labels'] -%}
