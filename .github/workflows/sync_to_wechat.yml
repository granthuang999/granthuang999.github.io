# GitHub Action: Sync new articles from GitHub Issues to WeChat Official Account (Final Verified Version)

name: Sync to WeChat Official Account

# 触发条件：当一个 Issue 被打上 "Publish" 标签时触发
on:
  issues:
    types: [labeled]

jobs:
  sync:
    # 只有当被打上的标签是 "Publish" 时，才执行任务
    if: github.event.label.name == 'Publish'
    runs-on: ubuntu-latest
    steps:
      - name: Sync to WeChat Official Account MP
        # 使用经过验证的、当前活跃的 Action
        uses: Ikaros-521/issues-to-wechat-mp@v1.2
        with:
          # 您的公众号 AppID (请确保大小写正确)
          app_id: ${{ secrets.WECHAT_APPID }}
          # 您的公众号 AppSecret
          app_secret: ${{ secrets.WECHAT_APPSECRET }}
          # Issue 编号，自动获取
          issue_number: ${{ github.event.issue.number }}
          # GitHub Token，自动提供
          github_token: ${{ secrets.GITHUB_TOKEN }}
